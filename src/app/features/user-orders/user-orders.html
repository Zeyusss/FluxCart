<div class="min-h-screen bg-gray-50 p-6">
  <h1 class="text-3xl font-bold mb-8 text-gray-900">My Orders</h1>

  @if(ordersList().length > 0){
  <!-- Loading Spinner -->
  @if(requestLoading()){
  <div class="flex justify-center mt-10">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  </div>
  }

  <!-- Orders Grid -->
  <div class="grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    @for(order of ordersList(); track order._id) {
    <div
      class="bg-white rounded-xl shadow-lg p-4 border border-gray-200 hover:shadow-xl transition transform hover:-translate-y-1"
    >
      <!-- Order Header -->
      <div class="flex justify-between items-start mb-3">
        <div class="flex-1">
          <div class="text-md font-semibold">Order #{{ order.id }}</div>
          <div class="text-gray-500 text-xs mt-1">
            Placed: {{ order.createdAt | date : 'shortDate' }} <br />
            Status:
            <span
              class="capitalize font-medium"
              [class]="{
                'text-yellow-500': !order.isPaid,
                'text-green-600': order.isPaid && order.isDelivered,
                'text-red-500': !order.isDelivered && order.isPaid
              }"
            >
              {{ order.isDelivered ? 'Delivered' : order.isPaid ? 'Paid' : 'Pending' }}
            </span>
          </div>
        </div>
        <div class="text-sm font-bold text-gray-800 ml-2">${{ order.totalOrderPrice }}</div>
      </div>

      <!-- Shipping Info -->
      <div class="mb-3 text-gray-600 text-xs">
        <div><strong>Address:</strong> {{ order.shippingAddress.details }}</div>
        <div><strong>City:</strong> {{ order.shippingAddress.city }}</div>
        <div><strong>Phone:</strong> {{ order.shippingAddress.phone }}</div>
        <div><strong>Payment:</strong> {{ order.paymentMethodType | titlecase }}</div>
      </div>

      <!-- Order Items -->
      <div class="divide-y divide-gray-200 max-h-48 overflow-y-auto">
        @for(item of order.cartItems; track item._id) {
        <div class="flex items-center justify-between py-2">
          <div class="flex items-center gap-3">
            <img
              [src]="item.product.imageCover"
              [alt]="item.product.title"
              class="w-12 h-12 object-cover rounded-lg"
            />
            <div>
              <div class="text-sm font-medium text-gray-900">{{ item.product.title }}</div>
              <div class="text-gray-500 text-xs">Qty: {{ item.count }} x ${{ item.price }}</div>
            </div>
          </div>
          <div class="text-gray-800 text-sm font-medium">${{ item.count * item.price }}</div>
        </div>
        }
      </div>
    </div>
    }
  </div>
  }@else {
  <app-empty-orders />
  }
</div>
