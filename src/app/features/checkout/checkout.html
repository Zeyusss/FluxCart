<div class="mx-auto max-w-[1200px] py-6">
  <app-back-button class="mb-4" navigateTo="/cart" label="Back to Cart" />
  <h1 class="text-3xl font-extrabold mb-4">Checkout</h1>

  <div class="grid grid-cols-1 lg:grid-cols-5 gap-5">
    <div class="lg:col-span-3 flex flex-col gap-6">
      <app-shipping-form />
      <app-payment-form />
    </div>
    <div class="lg:col-span-2">
      <app-summarize-order>
        <ng-container checkoutItems>
          @for (item of store.cartItems(); track item.product.id) {
          <div class="text-sm flex justify-between">
            <span> {{ item.product.title }} * {{ item.count }} </span>
            <span> ${{ item.price * item.count }} </span>
          </div>
          }
        </ng-container>
        <ng-container actionButtons>
          <button
            (click)="this.shippingForm()?.onSubmit($event)"
            matButton="filled"
            class="w-full mt-6 py-3"
          >
            @if (!this.shippingForm()?.requestLoading()) { Place Order }@else {
            <span
              class="inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"
            >
            </span>
            }
          </button>
        </ng-container>
      </app-summarize-order>
    </div>
  </div>
</div>
